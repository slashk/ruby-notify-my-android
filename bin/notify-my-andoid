#!/usr/bin/env ruby

require "rubygems"
require 'ruby-notify-my-android'
require 'yaml'

# set defaults
options = { :apikey => nil,
            :description => "test description", 
            :event => "test event", 
            :application => "NMA", 
            :priority => NMA::Priority::NORMAL }

# use first argument on command line as API key
options[:apikey] = ARGV[0]

# send notification
result = NMA.notify do |n|
  n.apikey      = options[:apikey]
  n.priority    = options[:priority]
  n.application = options[:application]
  n.event       = options[:event]
  n.description = options[:description]
  n.url         = options[:url]
end

# putput raw XML response
puts result.raw
